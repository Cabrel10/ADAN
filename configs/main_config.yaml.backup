# ==============================================================================
# CONFIGURATION PRINCIPALE DU PROJET ADAN
# ==============================================================================
# Ce fichier est le point d'entrée de la configuration. Il charge et orchestre
# les autres fichiers de configuration spécifiques (données, environnement, agent).

# Configuration des données
data:
  # Répertoire des données
  data_dir: "/home/morningstar/Documents/trading/ADAN/data/final"
  
  # Paires de trading disponibles (5 paires majeures)
  assets: 
    - "BTC"    # Bitcoin - La cryptomonnaie la plus importante par capitalisation
    - "ETH"    # Ethereum - La deuxième plus grande cryptomonnaie
    - "SOL"    # Solana - Une blockchain performante et populaire
    - "XRP"    # Ripple - Une cryptomonnaie de paiement majeure
    - "ADA"    # Cardano - Une plateforme de contrats intelligents concurrente d'Ethereum
  
  # Timeframes disponibles (du plus court au plus long)
  timeframes: ["5m", "1h", "4h"]
  
  # Configuration des caractéristiques par timeframe
    "5m":
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "CCI_20_0.015"
      - "ROC_9"
      - "MFI_14"
      - "EMA_5"
      - "EMA_20"
      - "SUPERT_14_2.0"
      - "SUPERTd_14_2.0"
      - "SUPERTl_14_2.0"
      - "SUPERTs_14_2.0"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "VWAP_D"
      - "OBV"
    "1h":
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "ROC_9"
      - "EMA_5"
      - "EMA_20"
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "ROC_9"
      - "EMA_5"
      - "EMA_20"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "EMA_50"
      - "EMA_100"
      - "SMA_200"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "EMA_50"
      - "EMA_100"
      - "SMA_200"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"
    "4h":
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "SMA_200"
      - "EMA_50"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "SUPERT_14_3.0"
      - "SUPERTd_14_3.0"
      - "SUPERTl_14_3.0"
      - "SUPERTs_14_3.0"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"

# Configuration de l'agent
agent:
  # Algorithme RL à utiliser
  algorithm: "PPO"
  # Type de politique
  policy: "MultiInputPolicy"

# Configuration du logging
logging:
  # Configuration globale du logging
  level: "DEBUG"
  # Utiliser le fichier de configuration dédié
  config_file: "logging_config.yaml"
  # Dossier de base pour les logs
  log_dir: "logs"

# Configuration de l'entraînement
training:
  # Nombre total de pas d'entraînement
  total_timesteps: 50000
  
  # Taille du batch
  batch_size: 64
  
  # Fréquence de sauvegarde du modèle (en pas)
  save_freq: 10000
  
  # Configuration des sauvegardes
  checkpointing:
    enabled: true
    save_freq: 50000
    model_name: "ppo_adan_v1"
    save_path: "${paths.trained_models_dir}/${training.checkpointing.model_name}"

# Configuration de l'état
state:
  # Taille de la fenêtre d'observation (nombre de pas de temps)
  window_size: 100
  
  # Timeframes à utiliser pour la construction de l'état
  timeframes: ["5m", "1h", "4h"]
  
  # Configuration des caractéristiques par timeframe
    "5m":
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "CCI_20_0.015"
      - "ROC_9"
      - "MFI_14"
      - "EMA_5"
      - "EMA_20"
      - "SUPERT_14_2.0"
      - "SUPERTd_14_2.0"
      - "SUPERTl_14_2.0"
      - "SUPERTs_14_2.0"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "VWAP_D"
      - "OBV"
    "1h":
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "ROC_9"
      - "EMA_5"
      - "EMA_20"
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "STOCHk_14_3_3"
      - "STOCHd_14_3_3"
      - "ROC_9"
      - "EMA_5"
      - "EMA_20"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "EMA_50"
      - "EMA_100"
      - "SMA_200"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "EMA_50"
      - "EMA_100"
      - "SMA_200"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"
    "4h":
      - "OPEN"
      - "HIGH"
      - "LOW"
      - "CLOSE"
      - "VOLUME"
      - "RSI_14"
      - "MACD_12_26_9"
      - "MACDh_12_26_9"
      - "MACDs_12_26_9"
      - "CCI_20_0.015"
      - "MFI_14"
      - "SMA_200"
      - "EMA_50"
      - "ISA_9"
      - "ISB_26"
      - "ITS_9"
      - "IKS_26"
      - "ICS_26"
      - "SUPERT_14_3.0"
      - "SUPERTd_14_3.0"
      - "SUPERTl_14_3.0"
      - "SUPERTs_14_3.0"
      - "PSARl_0.02_0.2"
      - "PSARs_0.02_0.2"
      - "PSARaf_0.02_0.2"
      - "PSARr_0.02_0.2"
      - "ATRr_14"
      - "BBL_20_2.0"
      - "BBM_20_2.0"
      - "BBU_20_2.0"
      - "BBB_20_2.0"
      - "BBP_20_2.0"
      - "OBV"
      - "VWAP_D"
  
  # Inclure l'état du portefeuille dans l'observation
  include_portfolio_state: true

# Configuration de l'environnement
environment:
  # Capital initial en USDT
  initial_balance: 20.0
  
  # Frais de trading (0.1% par défaut)
  trading_fees: 0.001
  
  # Nombre maximum de pas par épisode
  max_steps: 1000
  
  # Liste des actifs disponibles pour le trading
  assets: ["BTC", "ETH", "SOL", "XRP", "ADA"]
  
  # Mode de fonctionnement (backtest, paper, live)
  
  # Règles de trading
  trading_rules:
    futures_enabled: false  # Activer le trading sur marge/futures
    leverage: 1            # Effet de levier (1 = pas d'effet de levier)
    commission_pct: 0.1    # Commission en pourcentage pour le trading spot
    futures_commission_pct: 0.02  # Commission pour le trading sur marge
    min_trade_size: 0.0001  # Taille minimale d'un ordre
    min_notional_value: 10.0  # Valeur minimale d'un ordre en USDT
    max_notional_value: 100000.0  # Valeur maximale d'un ordre en USDT
  
  # Gestion des risques
  risk_management:
    # Niveaux de capital pour le position sizing progressif
    capital_tiers:
      - max_capital: 1000
        max_position_size_pct: 5.0
        max_drawdown_pct: 2.0
      - max_capital: 10000
        max_position_size_pct: 3.0
        max_drawdown_pct: 1.5
      - max_capital: 100000
        max_position_size_pct: 2.0
        max_drawdown_pct: 1.0
    
    # Configuration du position sizing
    position_sizing:
      # Pourcentage maximum du capital à risquer par trade
      max_risk_per_trade_pct: 1.0
      # Pourcentage maximum du capital à allouer à un seul actif
      max_asset_allocation_pct: 20.0
      # Limites de concentration par actif (en % du capital total)
      concentration_limits:
        BTC: 30.0
        ETH: 25.0
        SOL: 20.0
        XRP: 15.0
        ADA: 10.0
      # Paramètres de stop-loss dynamique
      stop_loss:
        enabled: true
        atr_multiplier: 2.0  # Multiplicateur de l'ATR pour le stop-loss
        max_stop_loss_pct: 5.0  # Stop-loss maximum en %
      # Paramètres de take-profit
      take_profit:
        enabled: true
        risk_reward_ratio: 2.0  # Ratio risque/récompense cible
        trailing_enabled: true
        trailing_deviation_pct: 1.0  # Pourcentage de déviation pour le trailing stop
  mode: "backtest"

# ------------------------------------------------------------------------------
# Paramètres Généraux du Projet
# ------------------------------------------------------------------------------
general:
  # Nom du projet, utilisé pour les logs et les noms de modèles.
  project_name: "ADAN"
  
  # Graine aléatoire pour garantir la reproductibilité des expériences.
  random_seed: 42
  
  # Fuseau horaire utilisé pour tous les horodatages.
  timezone: "UTC"

# ------------------------------------------------------------------------------
# Configuration de l'Exécution
# ------------------------------------------------------------------------------
# Définit le mode de fonctionnement du script principal.
run:
  # Modes possibles: "train", "backtest", "paper_trade", "live_trade", "evaluate"
  mode: "train"
  
  # Activer le mode debug pour des logs plus détaillés et des vérifications.
  debug_mode: true
  
  # Nombre de coeurs CPU à utiliser pour le traitement parallèle (-1 = tous).
  n_jobs: -1

# ------------------------------------------------------------------------------
# Gestion des Chemins et Répertoires
# ------------------------------------------------------------------------------
# Centralise tous les chemins utilisés dans le projet pour une gestion facile.
paths:
  # Le répertoire racine du projet.
  # NOTE: Il est recommandé d'utiliser des chemins relatifs ou des variables
  # d'environnement pour une meilleure portabilité.
  base_dir: "."
  
  # Sous-répertoires (relatifs à base_dir)
  data_dir: "${paths.base_dir}/data"
  raw_data_dir: "${paths.data_dir}/raw"
  processed_data_dir: "${paths.data_dir}/processed"
  
  models_dir: "${paths.base_dir}/models"
  trained_models_dir: "${paths.models_dir}/rl_agents"
  
  logs_dir: "${paths.base_dir}/logs"
  
  reports_dir: "${paths.base_dir}/reports"
  figures_dir: "${paths.reports_dir}/figures"
  metrics_dir: "${paths.reports_dir}/metrics"

# ------------------------------------------------------------------------------
# Configuration des Sauvegardes (Checkpoints)
# ------------------------------------------------------------------------------
checkpointing:
  # Activer la sauvegarde automatique du modèle pendant l'entraînement.
  enabled: true
  
  # Fréquence de sauvegarde en nombre de pas de temps (timesteps).
  save_freq: 50000
  
  # Nom du modèle à sauvegarder. Peut inclure des placeholders.
  model_name: "ppo_adan_v1"
  
  # Chemin complet pour la sauvegarde (utilise les variables de la section paths).
  save_path: "${paths.trained_models_dir}/${checkpointing.model_name}"